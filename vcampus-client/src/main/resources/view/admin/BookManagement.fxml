<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox fx:controller="com.vcampus.client.controller.admin.BookManagementController"
      xmlns:fx="http://javafx.com/fxml/1"
      spacing="25"
      stylesheets="@../../css/library-admin.css"
      style="-fx-background-color: #f5f5f5;">

    <padding>
        <Insets top="30" right="30" bottom="30" left="30"/>
    </padding>

    <!-- 页面标题 -->
    <HBox alignment="CENTER_LEFT" styleClass="page-header">
        <Label text="📚 图书库存管理" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: black;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="🔄 刷新数据" fx:id="refreshButton" style="-fx-background-color: #2196f3; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20;"/>
    </HBox>

    <!-- 分割布局 -->
    <HBox spacing="30" VBox.vgrow="ALWAYS">

        <!-- 左侧：图书表格 -->
        <VBox spacing="20" HBox.hgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8, 0, 0, 2);">

            <!-- 搜索栏 -->
            <HBox spacing="15" alignment="CENTER_LEFT">
                <Label text="🔍" style="-fx-font-size: 18px;"/>
                <TextField fx:id="searchField" promptText="搜索图书ID、书名、作者..."
                           HBox.hgrow="ALWAYS" style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 8 12; -fx-font-size: 14px;"/>
                <Button text="搜索" fx:id="searchButton" style="-fx-background-color: #2196f3; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 8 16;"/>
                <Button text="清空" fx:id="clearSearchButton" style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 8 16;"/>
            </HBox>

            <!-- 图书表格 -->
            <TableView fx:id="booksTableView" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">
                <columns>
                    <TableColumn fx:id="bookIdCol" text="图书ID" prefWidth="120" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <TableColumn fx:id="titleCol" text="书名" prefWidth="220" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <TableColumn fx:id="authorCol" text="作者" prefWidth="150" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <TableColumn fx:id="publisherCol" text="出版社" prefWidth="150" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <TableColumn fx:id="statusCol" text="状态" prefWidth="100" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                    <TableColumn fx:id="stockCol" text="库存" prefWidth="80" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>

            <!-- 表格底部统计信息 -->
            <HBox spacing="30" alignment="CENTER_LEFT" style="-fx-background-color: #f8f9fa; -fx-background-radius: 6; -fx-padding: 12 16;">
                <Label text="📊 统计信息" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: black;"/>
                <Label fx:id="totalBooksLabel" text="总计: 0 本" style="-fx-font-size: 13px; -fx-text-fill: black;"/>
                <Label fx:id="availableBooksLabel" text="可借: 0 本" style="-fx-font-size: 13px; -fx-text-fill: black;"/>
                <Label fx:id="unavailableBooksLabel" text="不可借: 0 本" style="-fx-font-size: 13px; -fx-text-fill: black;"/>
            </HBox>
        </VBox>

        <!-- 右侧：操作面板 -->
        <VBox spacing="25" minWidth="380" maxWidth="380" style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8, 0, 0, 2);">

            <!-- 图书信息表单 -->
            <VBox spacing="20">
                <Label text="📝 图书信息编辑" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: black;"/>

                <GridPane hgap="15" vgap="15">
                    <columnConstraints>
                        <ColumnConstraints hgrow="NEVER" minWidth="80"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>

                    <Label text="图书ID*" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: black;" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <TextField fx:id="bookIdField" promptText="唯一标识符" style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 4; -fx-background-radius: 4; -fx-padding: 8 12; -fx-font-size: 13px;"
                               GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="书名*" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: black;" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <TextField fx:id="titleField" promptText="图书标题" style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 4; -fx-background-radius: 4; -fx-padding: 8 12; -fx-font-size: 13px;"
                               GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="作者*" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: black;" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <TextField fx:id="authorField" promptText="作者姓名" style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 4; -fx-background-radius: 4; -fx-padding: 8 12; -fx-font-size: 13px;"
                               GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                    <Label text="出版社" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: black;" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                    <TextField fx:id="publisherField" promptText="出版社名称" style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 4; -fx-background-radius: 4; -fx-padding: 8 12; -fx-font-size: 13px;"
                               GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                    <Label text="状态" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: black;" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                    <ComboBox fx:id="statusComboBox" style="-fx-background-color: #f8f9fa; -fx-border-color: #dee2e6; -fx-border-radius: 4; -fx-background-radius: 4; -fx-font-size: 13px;"
                              GridPane.columnIndex="1" GridPane.rowIndex="4" maxWidth="Infinity"/>

                    <Label text="库存*" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: black;" GridPane.columnIndex="0" GridPane.rowIndex="5"/>
                    <Spinner fx:id="stockSpinner" min="0" max="9999" initialValue="1" style="-fx-font-size: 13px;"
                             GridPane.columnIndex="1" GridPane.rowIndex="5" maxWidth="Infinity"/>
                </GridPane>

                <!-- 操作按钮组 -->
                <VBox spacing="12">
                    <HBox spacing="12" alignment="CENTER">
                        <Button fx:id="addButton" text="➕ 新增图书" style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 10 15;"
                                HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                        <Button fx:id="updateButton" text="✏️ 更新信息" style="-fx-background-color: #007bff; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 10 15;"
                                HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                    </HBox>
                    <HBox spacing="12" alignment="CENTER">
                        <Button fx:id="deleteButton" text="🗑️ 删除图书" style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 10 15;"
                                HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                        <Button fx:id="clearButton" text="🧹 清空表单" style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold; -fx-background-radius: 6; -fx-padding: 10 15;"
                                HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                    </HBox>
                </VBox>
            </VBox>
        </VBox>
    </HBox>
</VBox>