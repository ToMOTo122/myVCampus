<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.control.cell.PropertyValueFactory?>

<VBox fx:controller="com.vcampus.client.controller.BookListController"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:id="mainVBox"
      stylesheets="@../css/library.css"
      styleClass="main-container">

    <VBox alignment="CENTER" styleClass="header-container">
        <Label text="ðŸ“š VCampus å›¾ä¹¦é¦†" styleClass="header-title" />
        <Label text="æŽ¢ç´¢çŸ¥è¯†çš„æµ·æ´‹ï¼Œå¼€å¯å­¦ä¹ çš„æ—…ç¨‹" styleClass="header-subtitle" />
    </VBox>

    <TabPane fx:id="libraryTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" styleClass="tab-container">

        <Tab text="ðŸ“– å›¾ä¹¦åˆ—è¡¨">
            <VBox spacing="20.0" styleClass="tab-content-vbox">
                <padding>
                    <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="15" styleClass="search-container">
                    <TextField fx:id="searchField" promptText="è¯·è¾“å…¥ä¹¦åã€ä½œè€…æˆ–å…³é”®è¯æœç´¢..." styleClass="search-input" HBox.hgrow="ALWAYS" />
                    <Button fx:id="searchButton" text="ðŸ” æœç´¢å›¾ä¹¦" styleClass="btn-primary" />
                    <Button fx:id="refreshButton" text="ðŸ”„ åˆ·æ–°" styleClass="btn-secondary" />
                </HBox>

                <GridPane fx:id="statsGrid" hgap="20" vgap="20" styleClass="stats-grid">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                    </columnConstraints>
                    <VBox styleClass="stat-card" GridPane.columnIndex="0">
                        <Label fx:id="totalBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="é¦†è—å›¾ä¹¦" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="1">
                        <Label fx:id="availableBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å¯å€Ÿå›¾ä¹¦" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="2">
                        <Label fx:id="borrowedBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å·²å€Ÿå‡º" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="3">
                        <Label fx:id="newBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="æœ¬æœˆæ–°å¢ž" />
                    </VBox>
                </GridPane>

                <TableView fx:id="booksTableView" VBox.vgrow="ALWAYS" styleClass="custom-table-view">
                    <columns>
                        <TableColumn fx:id="bookIdCol" prefWidth="80.0" text="å›¾ä¹¦ID" />
                        <TableColumn fx:id="titleCol" prefWidth="250.0" text="ä¹¦å" />
                        <TableColumn fx:id="authorCol" prefWidth="150.0" text="ä½œè€…" />
                        <TableColumn fx:id="publisherCol" prefWidth="150.0" text="å‡ºç‰ˆç¤¾" />
                        <TableColumn fx:id="statusCol" prefWidth="100.0" text="çŠ¶æ€" />
                        <TableColumn fx:id="stockCol" prefWidth="60.0" text="åº“å­˜" />
                        <TableColumn fx:id="actionCol" prefWidth="150.0" text="æ“ä½œ" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <Tab text="ðŸ“‹ ä¸ªäººå€Ÿé˜…">
            <VBox spacing="20" styleClass="tab-content-vbox">
                <padding>
                    <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                </padding>
                <Label styleClass="section-title" text="ðŸ“‹ æˆ‘çš„å€Ÿé˜…è®°å½•" />
                <GridPane hgap="20" vgap="20" styleClass="stats-grid">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                    </columnConstraints>
                    <VBox styleClass="stat-card" GridPane.columnIndex="0">
                        <Label fx:id="currentBorrowLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å½“å‰å€Ÿé˜…" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="1">
                        <Label fx:id="historyBorrowLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="åŽ†å²å€Ÿé˜…" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="2">
                        <Label fx:id="expiringBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å³å°†åˆ°æœŸ" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="3">
                        <Label fx:id="overdueBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="é€¾æœŸå›¾ä¹¦" />
                    </VBox>
                </GridPane>
                <TableView fx:id="borrowHistoryTable" VBox.vgrow="ALWAYS" styleClass="custom-table-view">
                    <columns>
                        <TableColumn fx:id="borrowIdCol" prefWidth="80.0" text="å€Ÿé˜…ID" />
                        <TableColumn fx:id="borrowTitleCol" prefWidth="250.0" text="ä¹¦å" />
                        <TableColumn fx:id="borrowDateCol" prefWidth="150.0" text="å€Ÿé˜…æ—¥æœŸ" />
                        <TableColumn fx:id="returnDateCol" prefWidth="150.0" text="åº”è¿˜æ—¥æœŸ" />
                        <TableColumn fx:id="borrowStatusCol" prefWidth="100.0" text="çŠ¶æ€" />
                        <TableColumn fx:id="borrowActionCol" prefWidth="150.0" text="æ“ä½œ" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <Tab text="ðŸŽ¯ å›¾ä¹¦é¦†æ´»åŠ¨">
            <HBox spacing="30.0" styleClass="tab-content-hbox">
                <padding>
                    <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                </padding>
                <VBox spacing="10" HBox.hgrow="SOMETIMES" styleClass="activity-sidebar">
                    <Label styleClass="section-title" text="æœ€æ–°æ´»åŠ¨" />
                    <ListView fx:id="activityListView" VBox.vgrow="ALWAYS" />
                </VBox>
                <VBox spacing="15" HBox.hgrow="ALWAYS" styleClass="activity-detail-container">
                    <Label fx:id="activityTitleLabel" styleClass="activity-title" />
                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="activity-meta">
                        <Label text="ðŸ“…" styleClass="icon-label" />
                        <Label fx:id="activityDateLabel" styleClass="activity-date" />
                        <Label text="ðŸ“" styleClass="icon-label" />
                        <Label fx:id="activityLocationLabel" styleClass="activity-location" />
                    </HBox>
                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="activity-scroll-pane">
                        <Text fx:id="activityContentText" styleClass="activity-content" wrappingWidth="600" />
                    </ScrollPane>
                </VBox>
            </HBox>
        </Tab>

        <Tab text="ðŸ” æ–‡çŒ®æŸ¥é˜…">
            <VBox styleClass="tab-content-vbox">
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="literature-header-container">
                    <Label styleClass="section-title" text="å­¦æœ¯èµ„æºåº“" />
                    <Label styleClass="section-subtitle" text="æŽ¢ç´¢å‰æ²¿å­¦æœ¯æ–‡çŒ®ï¼ŒåŠ©åŠ›æ‚¨çš„ç ”ç©¶ä¹‹è·¯" />
                    <HBox HBox.hgrow="ALWAYS" />
                    <TextField fx:id="literatureSearchField" promptText="è¯·è¾“å…¥æ–‡çŒ®å…³é”®è¯..." styleClass="search-input" prefWidth="350" />
                    <Button fx:id="literatureSearchButton" text="æœç´¢æ–‡çŒ®" styleClass="search-button" />
                </HBox>

                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="literature-scroll-pane">
                    <VBox fx:id="literatureListVBox" spacing="20.0" styleClass="literature-list" />
                </ScrollPane>
            </VBox>
        </Tab>

    </TabPane>
</VBox>