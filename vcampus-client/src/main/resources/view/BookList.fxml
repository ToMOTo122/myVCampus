<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<VBox fx:controller="com.vcampus.client.controller.BookListController"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:id="mainVBox"
      stylesheets="@../css/library.css"
      styleClass="main-container">

    <!-- é¡µé¢å¤´éƒ¨ -->
    <VBox alignment="CENTER" styleClass="header-container">
        <Label text="ðŸ“š VCampus å›¾ä¹¦é¦†" styleClass="header-title" />
        <Label text="æŽ¢ç´¢çŸ¥è¯†çš„æµ·æ´‹ï¼Œå¼€å¯å­¦ä¹ çš„æ—…ç¨‹" styleClass="header-subtitle" />
    </VBox>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <TabPane fx:id="libraryTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" styleClass="tab-container">

        <!-- å›¾ä¹¦å€Ÿé˜… Tab -->
        <Tab text="ðŸ“– å›¾ä¹¦å€Ÿé˜…">
            <VBox spacing="20.0" styleClass="tab-content-vbox">
                <padding>
                    <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                </padding>

                <!-- æœç´¢åŒºåŸŸ -->
                <HBox alignment="CENTER_LEFT" spacing="15" styleClass="search-container">
                    <TextField fx:id="searchField" promptText="è¯·è¾“å…¥ä¹¦åã€ä½œè€…æˆ–å…³é”®è¯æœç´¢..."
                               styleClass="search-input" HBox.hgrow="ALWAYS" />
                    <Button fx:id="searchButton" text="ðŸ” æœç´¢å›¾ä¹¦" styleClass="btn-primary" />
                    <Button fx:id="refreshButton" text="ðŸ”„ åˆ·æ–°" styleClass="btn-secondary" />
                </HBox>

                <!-- ç»Ÿè®¡ä¿¡æ¯å¡ç‰‡ -->
                <GridPane fx:id="statsGrid" hgap="20" vgap="20" styleClass="stats-grid">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                    </columnConstraints>

                    <VBox styleClass="stat-card" GridPane.columnIndex="0">
                        <Label fx:id="totalBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="é¦†è—å›¾ä¹¦" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="1">
                        <Label fx:id="availableBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å¯å€Ÿå›¾ä¹¦" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="2">
                        <Label fx:id="borrowedBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å·²å€Ÿå‡º" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="3">
                        <Label fx:id="newBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="æœ¬æœˆæ–°å¢ž" />
                    </VBox>
                </GridPane>

                <!-- å›¾ä¹¦åˆ—è¡¨è¡¨æ ¼ -->
                <TableView fx:id="booksTableView" VBox.vgrow="ALWAYS" styleClass="custom-table-view">
                    <columns>
                        <TableColumn fx:id="bookIdCol" prefWidth="80.0" text="å›¾ä¹¦ID" />
                        <TableColumn fx:id="titleCol" prefWidth="250.0" text="ä¹¦å" />
                        <TableColumn fx:id="authorCol" prefWidth="150.0" text="ä½œè€…" />
                        <TableColumn fx:id="publisherCol" prefWidth="150.0" text="å‡ºç‰ˆç¤¾" />
                        <TableColumn fx:id="statusCol" prefWidth="100.0" text="çŠ¶æ€" />
                        <TableColumn fx:id="stockCol" prefWidth="60.0" text="åº“å­˜" />
                        <TableColumn fx:id="actionCol" prefWidth="150.0" text="æ“ä½œ" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- ä¸ªäººå€Ÿé˜… Tab -->
        <Tab text="ðŸ“‹ æˆ‘çš„å€Ÿé˜…">
            <VBox spacing="20" styleClass="tab-content-vbox">
                <padding>
                    <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                </padding>

                <Label styleClass="section-title" text="ðŸ“‹ æˆ‘çš„å€Ÿé˜…è®°å½•" />

                <!-- å€Ÿé˜…ç»Ÿè®¡ä¿¡æ¯ -->
                <GridPane hgap="20" vgap="20" styleClass="stats-grid">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                        <ColumnConstraints hgrow="SOMETIMES" percentWidth="25.0" />
                    </columnConstraints>

                    <VBox styleClass="stat-card" GridPane.columnIndex="0">
                        <Label fx:id="currentBorrowLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å½“å‰å€Ÿé˜…" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="1">
                        <Label fx:id="historyBorrowLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="åŽ†å²å€Ÿé˜…" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="2">
                        <Label fx:id="expiringBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="å³å°†åˆ°æœŸ" />
                    </VBox>
                    <VBox styleClass="stat-card" GridPane.columnIndex="3">
                        <Label fx:id="overdueBooksLabel" styleClass="stat-number" text="0" />
                        <Label styleClass="stat-label" text="é€¾æœŸå›¾ä¹¦" />
                    </VBox>
                </GridPane>

                <!-- å€Ÿé˜…è®°å½•è¡¨æ ¼ -->
                <TableView fx:id="borrowHistoryTable" VBox.vgrow="ALWAYS" styleClass="custom-table-view">
                    <columns>
                        <TableColumn fx:id="borrowIdCol" prefWidth="80.0" text="å€Ÿé˜…ID" />
                        <TableColumn fx:id="borrowTitleCol" prefWidth="250.0" text="ä¹¦å" />
                        <TableColumn fx:id="borrowDateCol" prefWidth="150.0" text="å€Ÿé˜…æ—¥æœŸ" />
                        <TableColumn fx:id="returnDateCol" prefWidth="150.0" text="åº”è¿˜æ—¥æœŸ" />
                        <TableColumn fx:id="borrowStatusCol" prefWidth="100.0" text="çŠ¶æ€" />
                        <TableColumn fx:id="borrowActionCol" prefWidth="200.0" text="æ“ä½œ" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- æ–‡çŒ®æŸ¥é˜… Tab -->
        <Tab text="ðŸ” æ–‡çŒ®æŸ¥é˜…">
            <VBox styleClass="tab-content-vbox">
                <padding>
                    <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                </padding>

                <!-- æ–‡çŒ®æŸ¥é˜…å¤´éƒ¨ -->
                <VBox spacing="15" styleClass="literature-header-container">
                    <HBox alignment="CENTER_LEFT" spacing="20">
                        <Label styleClass="section-title" text="ðŸ” å­¦æœ¯èµ„æºåº“" />
                        <Label styleClass="section-subtitle" text="æŽ¢ç´¢å‰æ²¿å­¦æœ¯æ–‡çŒ®ï¼ŒåŠ©åŠ›æ‚¨çš„ç ”ç©¶ä¹‹è·¯" />
                    </HBox>

                    <!-- æœç´¢æ  -->
                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="search-container">
                        <TextField fx:id="literatureSearchField" promptText="è¯·è¾“å…¥æ–‡çŒ®å…³é”®è¯..."
                                   styleClass="search-input" prefWidth="400" HBox.hgrow="ALWAYS" />
                        <Button fx:id="literatureSearchButton" text="æœç´¢æ–‡çŒ®" styleClass="btn-primary" />
                    </HBox>
                </VBox>

                <!-- æ–‡çŒ®åˆ—è¡¨è¡¨æ ¼ -->
                <TableView fx:id="literatureTableView" VBox.vgrow="ALWAYS" styleClass="custom-table-view">
                    <columns>
                        <TableColumn fx:id="literatureTitleCol" prefWidth="300.0" text="æ ‡é¢˜" />
                        <TableColumn fx:id="literatureAuthorCol" prefWidth="150.0" text="ä½œè€…" />
                        <TableColumn fx:id="literatureSourceCol" prefWidth="150.0" text="æ¥æº" />
                        <TableColumn fx:id="literaturePublishDateCol" prefWidth="120.0" text="å‘å¸ƒæ—¥æœŸ" />
                        <TableColumn fx:id="literatureActionCol" prefWidth="200.0" text="æ“ä½œ" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- å›¾ä¹¦é¦†æ´»åŠ¨ Tab -->
        <Tab text="ðŸŽ¯ å›¾ä¹¦é¦†æ´»åŠ¨">
            <HBox spacing="30.0" styleClass="tab-content-hbox">
                <padding>
                    <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                </padding>

                <!-- å·¦ä¾§æ´»åŠ¨åˆ—è¡¨ -->
                <VBox spacing="15" HBox.hgrow="SOMETIMES" styleClass="activity-sidebar" maxWidth="300" minWidth="280">
                    <Label styleClass="section-title" text="ðŸŽ¯ æœ€æ–°æ´»åŠ¨" />
                    <ListView fx:id="activityListView" VBox.vgrow="ALWAYS" styleClass="activity-list-view" />
                </VBox>

                <!-- å³ä¾§æ´»åŠ¨è¯¦æƒ… -->
                <VBox spacing="20" HBox.hgrow="ALWAYS" styleClass="activity-detail-container">
                    <!-- æ´»åŠ¨æ ‡é¢˜ -->
                    <Label fx:id="activityTitleLabel" styleClass="activity-detail-title"
                           text="è¯·ä»Žå·¦ä¾§é€‰æ‹©ä¸€ä¸ªæ´»åŠ¨æŸ¥çœ‹è¯¦æƒ…" wrapText="true" />

                    <!-- æ´»åŠ¨åŸºæœ¬ä¿¡æ¯ -->
                    <VBox spacing="10" styleClass="activity-meta-container">
                        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="activity-meta-hbox">
                            <Label text="ðŸ“…" styleClass="icon-label" />
                            <Label fx:id="activityDateLabel" styleClass="activity-meta-label" text="æ´»åŠ¨æ—¶é—´" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="activity-meta-hbox">
                            <Label text="ðŸ“" styleClass="icon-label" />
                            <Label fx:id="activityLocationLabel" styleClass="activity-meta-label" text="æ´»åŠ¨åœ°ç‚¹" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="activity-meta-hbox">
                            <Label text="ðŸ‘¤" styleClass="icon-label" />
                            <Label fx:id="activityOrganizerLabel" styleClass="activity-meta-label" text="ä¸»åŠžæ–¹" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="activity-meta-hbox">
                            <Label text="ðŸŽ¤" styleClass="icon-label" />
                            <Label fx:id="activitySpeakerLabel" styleClass="activity-meta-label" text="ä¸»è®²äºº" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="activity-meta-hbox">
                            <Label text="ðŸ‘¥" styleClass="icon-label" />
                            <Label fx:id="activityParticipantsLabel" styleClass="activity-meta-label" text="å‚ä¸Žäººæ•°" />
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="activity-meta-hbox">
                            <Label text="â„¹ï¸" styleClass="icon-label" />
                            <Label fx:id="activityStatusLabel" styleClass="activity-meta-label" text="æ´»åŠ¨çŠ¶æ€" />
                        </HBox>
                    </VBox>

                    <!-- æ´»åŠ¨è¯¦ç»†å†…å®¹ -->
                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="activity-scroll-pane">
                        <VBox spacing="15">
                            <Label text="æ´»åŠ¨è¯¦æƒ…" styleClass="section-subtitle" />
                            <Text fx:id="activityContentText" styleClass="activity-content"
                                  wrappingWidth="600" text="æ´»åŠ¨è¯¦ç»†å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º..." />
                        </VBox>
                    </ScrollPane>

                    <!-- æŠ¥åæŒ‰é’® -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Button fx:id="activityRegisterButton" text="ç«‹å³æŠ¥å" styleClass="btn-primary" />
                        <Label styleClass="activity-meta-label" text="ç‚¹å‡»æŒ‰é’®å³å¯æŠ¥åå‚åŠ æ´»åŠ¨" />
                    </HBox>
                </VBox>
            </HBox>
        </Tab>

    </TabPane>
</VBox>